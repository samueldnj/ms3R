\clearpage
# Figures



```{r figCaptions, echo = FALSE, include = FALSE, warning = FALSE }
DERcplxMapCap <- "Mininum trawlable survey biomass $B_{trawl}$ estimates for DER 
complex species on the BC coast, aggregated to a 10km square grid.
Estimates are produced by scaling average trawl survey ($kg/m^2$) 
density values in each grid cell by the cell's area in $m^2$. 
Locations that do not show a coloured grid cell do not have any 
survey blocks from which to calculate relative biomass. Survey density 
for each grid cell is calculated from data for the Hecate Strait 
Assemblage Survey and the BC Groundfish Trawl Synoptic Survey, stored 
in the GFBio data base maintained at the Pacific Biological Station 
of Fisheries and Oceans, Canada. Thick black lines delineate the major 
statistical areas 3CD and 5ABCDE used for groundfish management BC, while
the dashed grey lines makr out latitude and longitude, indicating the
rotation of the coordinates to save space. The full colour figure 
is available in the online version of the article."


dataSummFigCap <- "A summary of DER complex data available for fitting the 
assessment model. Panels show species from left to right, and rows show
stock areas from north to south. Each panel is split into four cells, with
the top three showing a filled circle when a biomass index, age-composition,
length-composition, or length-conditional age-composition exists for 
each fleet (colours) for the indicated year. The bottom cell shows commercial 
catch (relative to the maximum catch) in grey bars."

SBsptCaption <- "Spawning biomass (red solid line), unfished biomass (red 
horizontal dashed line), catch (grey bars), and scaled biomass indices 
(coloured points), for all stocks and species. Indices are scaled by the 
fleet catchability and the ratio of spawning biomass to vulnerable biomass, 
i.e. $ I^{scaled}_{s,p,f,t} = \\frac{I_{s,p,f,t} SSB_{s,p,t}}{q_{s,p,f,t} B_{s,p,f,t}}$."

idxResidsCap <- "Standardised residuals for commercial CPUE and survey 
trawlable biomass indices."

econYieldCurveCap <- "Steady state net profits, species and complex revenue,
and variable costs of fishing as functions of fishing effort for the nine 
DER complex management units, as well as across all three species within 
each stock area. Each panel shows the three individual DER complex species 
revenue curves in different colours, and the complex revenue curve found 
by summing the three species curves as a solid black line. Variable fishing 
costs, including fuel and crew share, are shown as a red line, while total 
profits are shown as the dashed black line."
```

```{r fig1-DERcomplexSurveyBio, echo = FALSE, warning = FALSE, fig.cap = DERcplxMapCap }
figPath <- file.path("./figure/fig1-DERcomplexSurveyBio.pdf")
knitr::include_graphics(figPath)
```

\blandscape
```{r fig2-dataSummmary, echo = FALSE, warning = FALSE, fig.cap = dataSummFigCap, fig.width = 9, out.width = "9in" }
figPath <- file.path("./figure/fig2-dataSummmary.pdf")
if(params$redoPlots)
{
  graphics.off()
  pdf(file = figPath, width = 9/fig_asp, height = 9 )
  plotDataSummary(  simObj, 
                    fleetLabs = c(  "Historical",
                                    "Modern",
                                    "HS Ass.",
                                    "Synoptic"),
                    dataCells = c(  "Indices",
                                    "Ages",
                                    "Lengths",
                                    "Catch") )
  dev.off()
}
knitr::include_graphics(figPath)
```

```{r fig3-idxResids, echo = FALSE, warning = FALSE, fig.cap = idxResidsCap, fig.width = 9, out.width = "9in" }
figPath <- file.path("./figure/fig3-idxResids.pdf")
if(params$redoPlots)
{
  graphics.off()
  pdf(file = figPath, width = 9/fig_asp, height = 9 )
  plotIdxResidsGrid( reports)
  dev.off()
}
knitr::include_graphics(figPath)
```

```{r fig4-SpawnBioPlots, echo = FALSE, warning = FALSE, fig.cap = SBsptCaption, fig.width = 9, out.width = "9in" }
figPath <- file.path("./figure/fig4-SpawnBioPlots.pdf")
if(params$redoPlots)
{
  graphics.off()
  pdf(file = figPath, width = 9/fig_asp, height = 9 )
  plotSBspt( reports, pub = TRUE)
  dev.off()
}
knitr::include_graphics(figPath)
```

\elandscape

```{r fig5-DERcomplexCatchYieldCurves, echo = FALSE, warning = FALSE, fig.cap = econYieldCurveCap }
figPath <- file.path("./figure/fig5-DERcomplexYieldCurves.pdf")
if(params$redoPlots | !file.exists(figPath))
{
  graphics.off()
  pdf(file = figPath, width = 8.5, height = 11 )
  plotEffYieldCurves( obj = simObj, 
                      maxE = 80,
                      pIdx = 1:3,
                      sIdx = 1:3,
                      plotCplx = TRUE )
  dev.off()
}

knitr::include_graphics(figPath)
```


```{r fig6-DERcomplexEconYieldCurves, echo = FALSE, warning = FALSE, fig.cap = econYieldCurveCap }
figPath <- file.path("./figure/fig6-DERcomplexEconYieldCurves.pdf")
if(params$redoPlots | !file.exists(figPath))
{
  graphics.off()
  pdf(file = figPath, width = 8.5, height = 11 )
  plotCWeconYield(  obj = simObj, 
                    maxE = 80,
                    plotCplx = TRUE )
  dev.off()
}
knitr::include_graphics(figPath)
```
